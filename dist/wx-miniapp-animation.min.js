/*!
 * wx-miniapp-animation.js v0.0.1
 * (c) 2019-2020 kallsave
 * Released under the MIT License.
 */
/*!
 * wx-miniapp-animation.js v0.0.1
 * (c) 2019-2020 kallsave
 * Released under the MIT License.
 */
var t,e;t=this,e=function(t){"use strict";function e(t){let i,s=function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t);if("Array"===s)i=[];else{if("Object"!==s)return t;i={}}for(const s in t){const n=t[s];i[s]=e(n)}return i}function i(t,e){for(const s in e)t[s]&&"object"==typeof t[s]?i(t[s],e[s]):t[s]=e[s]}function s(t,...s){for(let n=0;n<s.length;n++)i(t,e(s[n]));return t}const n=function(){};let o;const r=function(t){return setTimeout(()=>{let e=(new Date).getTime();o||(o=e),t(e-o)},100/6)},a=function(t){return clearTimeout(t)};function h(t){return 1- --t*t*t*t}class u{constructor(t){this._offset=s({},t.offset),this._beginProgress=t.beginProgress||0,this.beginProgress=this._beginProgress,this.duration=t.duration,this.between=t.between,this.easing=t.easing,this.stepCallback=t.stepCallback,this.doneCallback=t.doneCallback,this.isAuto=t.isAuto,this.isLoop=t.isLoop,this.isAuto&&this.start()}clearOffset(){this.offset={};for(const t in this._offset){const e=this._offset[t].begin||0,i=this._offset[t].end;this.offset[t]={begin:e,end:i}}}start(){this.clearOffset(),this.requestAnimationFrameId=r(t=>{this.timeStart=t,t+=this.beginProgress*this.duration,this.isRunning=!0,this.loop(t)})}loop(t){this.isRunning&&(this.update(t),this.timeCurrent<this.duration?this.continueHandler():this.doneHandler())}continueHandler(){this.setTransform(),this.requestAnimationFrameId=r(t=>{t+=this.beginProgress*this.duration,this.loop(t)})}doneHandler(){this.timeCurrent=this.duration,this.setTransform(),"function"==typeof this.doneCallback&&this.doneCallback(),this.isLoop&&(clearTimeout(this.betweenTimeout),this.betweenTimeout=setTimeout(()=>{this.loopStart()},this.between))}update(t){this.timeCurrent=t-this.timeStart}setTransform(){let t="";for(let e in this.offset){const i=this.offset[e].begin,s=this.offset[e].end;this.timeCurrent<this.duration?t+=`${e}(${(s-i)*(this.timeCurrent/this.duration)+i}px) `:t+=`${e}(${s}px) `}const e=this.duration?this.timeCurrent/this.duration:1;this.stepCallback({transform:t,progress:e})}stop(){this.isRunning=!1,a(this.requestAnimationFrameId)}loopStart(){this.beginProgress=0,this.start()}restart(){this.beginProgress=this._beginProgress,this.start()}destroy(){this.isRunning=!1,a(this.requestAnimationFrameId)}}t.cancelAnimationFrame=a,t.default=t=>new u(s({},{offset:{},duration:1e3,between:0,easing:h,doneCallback:n,stepCallback:n,isAuto:!0,isLoop:!1},t)),t.requestAnimationFrame=r,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).WxMiniappAnimation={});